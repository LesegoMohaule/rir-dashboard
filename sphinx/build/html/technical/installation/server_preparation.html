
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Preparing the server &#8212; RIR Dashboard 1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Initial Configuration" href="initial_configuration.html" />
    <link rel="prev" title="Installation" href="index.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="tex2jax_ignore mathjax_ignore section" id="preparing-the-server">
<h1>Preparing the server<a class="headerlink" href="#preparing-the-server" title="Permalink to this headline">¶</a></h1>
<div class="section" id="basic-security">
<h2>Basic Security<a class="headerlink" href="#basic-security" title="Permalink to this headline">¶</a></h2>
<div class="section" id="unattended-upgrades">
<h3>Unattended upgrades<a class="headerlink" href="#unattended-upgrades" title="Permalink to this headline">¶</a></h3>
<p>This will automatically install only security fixes on a continual basis on your server.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">unattended</span><span class="o">-</span><span class="n">upgrades</span>
</pre></div>
</div>
</div>
<div class="section" id="ssh">
<h3>ssh<a class="headerlink" href="#ssh" title="Permalink to this headline">¶</a></h3>
<p>Disable password authentication for SSH</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">vim</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ssh</span><span class="o">/</span><span class="n">sshd_config</span>
</pre></div>
</div>
<p>Set this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PasswordAuthentication</span> <span class="n">no</span>
<span class="n">Then</span> <span class="n">do</span>
<span class="n">sudo</span> <span class="n">systemctl</span> <span class="n">restart</span> <span class="n">sshd</span><span class="o">.</span><span class="n">service</span>
</pre></div>
</div>
</div>
<div class="section" id="crowdsec">
<h3>Crowdsec<a class="headerlink" href="#crowdsec" title="Permalink to this headline">¶</a></h3>
<p>https://crowdsec.net/</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="o">-</span><span class="n">qO</span> <span class="o">-</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">s3</span><span class="o">-</span><span class="n">eu</span><span class="o">-</span><span class="n">west</span><span class="o">-</span><span class="mf">1.</span><span class="n">amazonaws</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">crowdsec</span><span class="o">.</span><span class="n">debian</span><span class="o">.</span><span class="n">pragmatic</span><span class="o">/</span><span class="n">crowdsec</span><span class="o">.</span><span class="n">asc</span> <span class="o">|</span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">key</span> <span class="n">add</span> <span class="o">-</span> <span class="o">&amp;&amp;</span> <span class="n">echo</span> <span class="s2">&quot;deb https://s3-eu-west-1.amazonaws.com/crowdsec.debian.pragmatic/$(lsb_release -cs) $(lsb_release -cs) main&quot;</span> <span class="o">|</span> <span class="n">sudo</span> <span class="n">tee</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">apt</span><span class="o">/</span><span class="n">sources</span><span class="o">.</span><span class="n">list</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">crowdsec</span><span class="o">.</span><span class="n">list</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">null</span><span class="p">;</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">crowdsec</span>
</pre></div>
</div>
</div>
<div class="section" id="fail2ban">
<h3>Fail2ban<a class="headerlink" href="#fail2ban" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">fail2ban</span>
</pre></div>
</div>
<p>See: https://www.fail2ban.org/wiki/index.php/Main_Page</p>
</div>
<div class="section" id="firewall">
<h3>Firewall<a class="headerlink" href="#firewall" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">ufw</span> <span class="n">allow</span> <span class="n">ssh</span>
<span class="n">sudo</span> <span class="n">ufw</span> <span class="n">enable</span>
<span class="n">sudo</span> <span class="n">ufw</span> <span class="n">status</span>
</pre></div>
</div>
<p>Should show something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Status</span><span class="p">:</span> <span class="n">active</span>

<span class="n">To</span>             <span class="n">Action</span>   <span class="n">From</span>
<span class="o">--</span>             <span class="o">------</span>   <span class="o">----</span>
<span class="mi">22</span><span class="o">/</span><span class="n">tcp</span>           <span class="n">ALLOW</span>    <span class="n">Anywhere</span>         
<span class="mi">22</span><span class="o">/</span><span class="n">tcp</span> <span class="p">(</span><span class="n">v6</span><span class="p">)</span>        <span class="n">ALLOW</span>    <span class="n">Anywhere</span> <span class="p">(</span><span class="n">v6</span><span class="p">)</span>
</pre></div>
</div>
<p>We will open more ports as they are needed.</p>
</div>
<div class="section" id="status-monitoring">
<h3>Status monitoring<a class="headerlink" href="#status-monitoring" title="Permalink to this headline">¶</a></h3>
<p>gotop is a great console based dashboard for monitoring your server.</p>
<p>Ubuntu:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">golang</span>
<span class="n">cd</span> 
<span class="n">go</span> <span class="n">get</span> <span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">cjbassi</span><span class="o">/</span><span class="n">gotop</span>
<span class="n">chmod</span> <span class="o">+</span><span class="n">x</span> <span class="n">go</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">gotop</span>
<span class="n">sudo</span> <span class="n">cp</span> <span class="n">go</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">gotop</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span>
</pre></div>
</div>
<p>Fedora:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">dnf</span> <span class="n">install</span> <span class="n">golang</span>
<span class="n">cd</span> 
<span class="n">go</span> <span class="n">get</span> <span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">cjbassi</span><span class="o">/</span><span class="n">gotop</span>
<span class="n">chmod</span> <span class="o">+</span><span class="n">x</span> <span class="n">go</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">gotop</span>
<span class="n">sudo</span> <span class="n">cp</span> <span class="n">go</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">gotop</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span>
</pre></div>
</div>
<p>Now just type gotop whenever you want to see your terminal system monitor.</p>
</div>
</div>
<div class="section" id="additional-software">
<h2>Additional Software<a class="headerlink" href="#additional-software" title="Permalink to this headline">¶</a></h2>
<div class="section" id="docker">
<h3>Docker<a class="headerlink" href="#docker" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">docker</span><span class="o">.</span><span class="n">io</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="o">-</span><span class="n">y</span> <span class="n">install</span> <span class="n">python3</span><span class="o">-</span><span class="n">pip</span>
<span class="n">sudo</span> <span class="n">pip3</span> <span class="n">install</span> <span class="n">docker</span><span class="o">-</span><span class="n">compose</span>
</pre></div>
</div>
<div class="admonition warning">
At this time we do not use the snapd installation of docker. Note that if you do,
you will need to install osgs in your home directory. See snapd docker notes 
for details.
</div>
</div>
<div class="section" id="git-rpl-pwgen-make-and-openssl">
<h3>Git, rpl, pwgen, Make and openssl<a class="headerlink" href="#git-rpl-pwgen-make-and-openssl" title="Permalink to this headline">¶</a></h3>
<p>Needed for checking out our docker project and running the various make
commands we provide.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">git</span> <span class="n">make</span> <span class="n">rpl</span> <span class="n">pwgen</span> <span class="n">openssl</span> <span class="n">apache2</span><span class="o">-</span><span class="n">utils</span>
</pre></div>
</div>
<p>or fedora:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">dnf</span> <span class="n">install</span> <span class="n">openssl</span> <span class="n">rpl</span> <span class="n">git</span> <span class="n">pwgen</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id1">
<h2>Firewall<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>If you are using ufw, open port 80 and 443 as minimum. After the initial setup, you
can again close port 80.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">ufw</span> <span class="n">allow</span> <span class="mi">80</span>
<span class="n">sudo</span> <span class="n">ufw</span> <span class="n">allow</span> <span class="mi">443</span>
</pre></div>
</div>
<div class="section" id="move-on-to-osgs-installation">
<h3>Move on to OSGS Installation<a class="headerlink" href="#move-on-to-osgs-installation" title="Permalink to this headline">¶</a></h3>
<p>Ok we are ready to install OSGS! Go ahead to the <a class="reference internal" href="initial_configuration.html"><span class="doc std std-doc">initial configuration page</span></a> now.</p>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">RIR Dashboard</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">RIR Technical Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../roadmap.html">RIR Roadmap</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">RIR Technical Documentation</a><ul>
  <li><a href="index.html">Installation</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Installation</a></li>
      <li>Next: <a href="initial_configuration.html" title="next chapter">Initial Configuration</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Kartoza (Pty) Ltd..
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.3.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/technical/installation/server_preparation.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>